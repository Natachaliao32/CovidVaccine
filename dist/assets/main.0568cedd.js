/* empty css              */import{W as me,S as ye,P as he,O as xe,F as we,a as Me,T as be,M as ve,b as A,A as Le,D as Ae,c as w,C as P,G as R,L as Pe,d as Ee,e as M,B as Ie,V as D,f as Se}from"./vendor.0a17dcc3.js";const Te=function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))a(t);new MutationObserver(t=>{for(const o of t)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&a(r)}).observe(document,{childList:!0,subtree:!0});function l(t){const o={};return t.integrity&&(o.integrity=t.integrity),t.referrerpolicy&&(o.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?o.credentials="include":t.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(t){if(t.ep)return;t.ep=!0;const o=l(t);fetch(t.href,o)}};Te();const j=1800,B=500,N=800,c=400,V=window.innerWidth,_=window.innerHeight,ze=45,Oe=1,ke=4e3,Ce=document.getElementById("globe"),E=new me({canvas:Ce,alpha:!0});E.setSize(V,_);let f=new ye;const h=new he(ze,V/_,Oe,ke);h.position.set(j,B,N);h.lookAt(0,0,0);const q=new xe(h,E.domElement);q.minDistance=500;q.maxDistance=3e3;let H=new Pe,Fe=new we(H),W=null;Fe.load("fonts/PlayfairDisplay.json",function(e){W=e});$(document).ready(function(){jQuery.get("data.csv",function(e){H.onLoad=function(){console.log("resources loaded"),Be(De(e));let n=document.getElementById("loading_message");n.style.display="none"},Re(),Ge(),Y()})});function Ge(){let e=new Me(c,50,50),n=new be().load("textures/earthmap.png"),l=new ve({map:n,shininess:.2}),a=new A(e,l);f.add(a)}function Re(){let e=new Le(10066329);f.add(e),e=new Ae(16777215,.3),e.position.set(j,B,N),f.add(e)}function De(e,n){n=n||",";let l=new RegExp("(\\"+n+'|\\r?\\n|\\r|^)(?:"([^"]*(?:""[^"]*)*)"|([^"\\'+n+"\\r\\n]*))","gi"),a=[[]],t=null;for(;t=l.exec(e);){let o=t[1];o.length&&o!==n&&a.push([]);let r;t[2]?r=t[2].replace(new RegExp('""',"g"),'"'):r=t[3],a[a.length-1].push(r)}return a}function g(e,n,l,a){let t=e*Math.PI/180,o=(n-180)*Math.PI/180,r=-(l+a)*Math.cos(t)*Math.cos(o),d=(l+a)*Math.sin(t),m=(l+a)*Math.cos(t)*Math.sin(o);return new D(r,d,m)}function I(e,n){let l=[];for(let a=0;a<e.length;a++)l.push(e[a][n]);return l}function X(e,n){return Math.log(e/n)}function S(e){return e.shift(),e.pop(),e.map(n=>parseFloat(n.replace(",",".")))}function je(e,n,l){let a=new Ee(n,{font:W,size:5,height:1,curveSegments:12,bevelEnabled:!0,bevelThickness:.1,bevelSize:.1,bevelOffset:0,bevelSegments:5});a.applyMatrix4(new M().makeRotationY(Math.PI));let t=new w({color:0,opacity:1,emissive:7829367}),o=new A(a,t),r=new Ie().setFromObject(o),d=new D;return r.getSize(d),a.applyMatrix4(new M().makeTranslation(d.x/2,0,0)),o.position.set(l.x,l.y,l.z),o.lookAt(0,0,0),o}function x(e,n,l,a){let t=new Se(n,n,e,10,1);t.applyMatrix4(new M().makeTranslation(0,-e/2,0)),t.applyMatrix4(new M().makeRotationX(Math.PI/2));let o=new A(t,l);return o.position.set(a.x,a.y,a.z),o.lookAt(0,0,0),o}function Be(e){let n=S(I(e,3).slice()),l=S(I(e,5).slice()),a=S(I(e,4).slice()),t=n.map((s,i)=>s/l[i]),o=Math.max(...t);console.log("percentage vaccinated max : "+o);let r=a.map((s,i)=>X(s,t[i])),d=Math.max(...r),m=2,b=new w({color:0,opacity:.4,emissive:12237498,transparent:!0}),K=new w({color:0,opacity:1,emissive:7829367}),T=new P("#ffffff"),Q=new P("#007AA0"),U=new P("#EE2E31");const z=new R;for(let s=1;s<e.length-1;s++){const i=new R;let O=new w({color:0,opacity:.8,emissive:0}),u=parseInt(e[s][1]),p=parseInt(e[s][0]),k=parseFloat(e[s][3].replace(",","."))/parseFloat(e[s][5].replace(",",".")),Z=X(parseFloat(e[s][4].replace(",",".")),k)/d,y=10,J=1,ee=g(p,u,c,2);const te=x(y,J,K,ee);i.add(te);let C=10+500/o*k;T.lerpColors(Q,U,Z),O.color.set(T);let v=5,ne=g(p,u,c+y+m,2);const oe=x(C,v,O,ne);i.add(oe);let L=C+m+20,F=v+m,ae=g(p,u,c+y,2);const le=x(L,F,b,ae);i.add(le);let G=5,re=v-2,se=g(p,u,c+y+L,2);const ie=x(G,re,b,se);i.add(ie);let ce=5,de=F,ue=g(p,u,c+y+L+G,2);const pe=x(ce,de,b,ue);i.add(pe);let fe=g(p-2,u,c,2);const ge=je("PlayfairDisplay",e[s][2],fe);i.add(ge),z.add(i),Ne(s/(e.length-1))}f.add(z)}function Ne(e){const n=document.getElementById("loading_message");n.innerText="Loading : "+e*100+"%",console.log("Loading : "+e*100+"%")}function Y(){h.lookAt(f.position),E.render(f,h),requestAnimationFrame(Y)}
